<!-- /frontend/templates/index.html -->
{% extends "base.html" %}
{% block title %}Dashboard | {{ app_name }}{% endblock %}

{% block content %}
<h1>Patient Dashboard</h1>
<p style="margin-bottom:16px;">
  Select a patient to view their Neural Health Link report or register a new patient.
</p>

<div class="block" style="margin-bottom:20px;">
  <a href="{{ url_for('main.register_patient') }}" class="btn">
    + Register New Patient
  </a>
</div>

<div class="block">
  <h2>Existing Patients (Mock Dataset)</h2>
  <div class="table-wrapper">
    <table style="width:100%; border-collapse:collapse; font-size:0.95rem;">
      <thead style="background:#111a2d;">
        <tr style="text-align:left;">
          <th style="padding:10px; border-bottom:1px solid #ffffff22;">ID</th>
          <th style="padding:10px; border-bottom:1px solid #ffffff22;">Name</th>
          <th style="padding:10px; border-bottom:1px solid #ffffff22;">State</th>
          <th style="padding:10px; border-bottom:1px solid #ffffff22;">Present Disease</th>
          <th style="padding:10px; border-bottom:1px solid #ffffff22;">Last Visit</th>
          <th style="padding:10px; border-bottom:1px solid #ffffff22;">Report</th>
        </tr>
      </thead>
      <tbody>
        {% for p in patients %}
        <tr style="background-color:#0f1725aa;">
          <td style="padding:10px; border-bottom:1px solid #ffffff11;">{{ p.patient_id }}</td>
          <td style="padding:10px; border-bottom:1px solid #ffffff11;">{{ p.name }}</td>
          <td style="padding:10px; border-bottom:1px solid #ffffff11;">{{ p.state }}</td>
          <td style="padding:10px; border-bottom:1px solid #ffffff11;">{{ p.present_disease }}</td>
          <td style="padding:10px; border-bottom:1px solid #ffffff11;">{{ p.last_visit }}</td>
          <td style="padding:10px; border-bottom:1px solid #ffffff11;">
            <a href="{{ url_for('main.patient_view', patient_id=p.patient_id) }}" class="btn btn-small">
              View Report
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
